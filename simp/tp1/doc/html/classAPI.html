<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Security API for CCP: API Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Security API for CCP
   &#160;<span id="projectnumber">0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">API Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classAPI.html" title="API class. ">API</a> class.  
 <a href="classAPI.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="api_8hpp_source.html">api.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab2698dd4fb5e3fefa988f8020937b955"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#ab2698dd4fb5e3fefa988f8020937b955">API</a> (const char *fileUsers, const char *fileKeys)</td></tr>
<tr class="memdesc:ab2698dd4fb5e3fefa988f8020937b955"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor initialises <a class="el" href="classAPI.html" title="API class. ">API</a> from the file given in parameter.  <a href="#ab2698dd4fb5e3fefa988f8020937b955">More...</a><br /></td></tr>
<tr class="separator:ab2698dd4fb5e3fefa988f8020937b955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a583ec65b542b44e4b7013f5fc830fdcd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a583ec65b542b44e4b7013f5fc830fdcd">~API</a> ()</td></tr>
<tr class="memdesc:a583ec65b542b44e4b7013f5fc830fdcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="classAPI.html" title="API class. ">API</a> destructor.  <a href="#a583ec65b542b44e4b7013f5fc830fdcd">More...</a><br /></td></tr>
<tr class="separator:a583ec65b542b44e4b7013f5fc830fdcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a705f7e87f72e3cd8c078f438fac948"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a1a705f7e87f72e3cd8c078f438fac948">reset</a> ()</td></tr>
<tr class="memdesc:a1a705f7e87f72e3cd8c078f438fac948"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the <a class="el" href="classAPI.html" title="API class. ">API</a>.  <a href="#a1a705f7e87f72e3cd8c078f438fac948">More...</a><br /></td></tr>
<tr class="separator:a1a705f7e87f72e3cd8c078f438fac948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b02f83fb6209418f8b310845082ca80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a9b02f83fb6209418f8b310845082ca80">newUser</a> (const std::string &amp;login, const std::string &amp;password, uint32_t *id)</td></tr>
<tr class="memdesc:a9b02f83fb6209418f8b310845082ca80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a new user to the <a class="el" href="classAPI.html" title="API class. ">API</a>.  <a href="#a9b02f83fb6209418f8b310845082ca80">More...</a><br /></td></tr>
<tr class="separator:a9b02f83fb6209418f8b310845082ca80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94326209dc6c62d65cde5a37e3c0078"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#ad94326209dc6c62d65cde5a37e3c0078">deleteUser</a> (uint32_t id)</td></tr>
<tr class="memdesc:ad94326209dc6c62d65cde5a37e3c0078"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the user from the <a class="el" href="classAPI.html" title="API class. ">API</a>.  <a href="#ad94326209dc6c62d65cde5a37e3c0078">More...</a><br /></td></tr>
<tr class="separator:ad94326209dc6c62d65cde5a37e3c0078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ef4273680b86b5340442d965b48fab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a94ef4273680b86b5340442d965b48fab">newKey</a> (<a class="el" href="key_8hpp.html#a4f367c350737c92475175fb229c5570e">key_type_t</a> type, <a class="el" href="key_8hpp.html#a82f88f5cef6b287c45bd2fbb36879c3e">key_use_t</a> use, date_t validity, size_t length, uint32_t *id)</td></tr>
<tr class="memdesc:a94ef4273680b86b5340442d965b48fab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Randomly generate a key and add it to the memory.  <a href="#a94ef4273680b86b5340442d965b48fab">More...</a><br /></td></tr>
<tr class="separator:a94ef4273680b86b5340442d965b48fab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ad579d9450aa11e1fe5694283dc157e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ad579d9450aa11e1fe5694283dc157e"></a>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>disconnect</b> ()</td></tr>
<tr class="separator:a2ad579d9450aa11e1fe5694283dc157e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72faff24818ed8340f226ea07d437c3f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72faff24818ed8340f226ea07d437c3f"></a>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>connectUser</b> (const std::string &amp;login, const std::string &amp;password)</td></tr>
<tr class="separator:a72faff24818ed8340f226ea07d437c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac115603da5cc49b407f6b3710e01a985"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#ac115603da5cc49b407f6b3710e01a985">wrap</a> (uint32_t idWrapKey, uint32_t idExportedKey, uint8_t *output, size_t *length)</td></tr>
<tr class="separator:ac115603da5cc49b407f6b3710e01a985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad232f21ac35cb1d60aaef0b6e7979c15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#ad232f21ac35cb1d60aaef0b6e7979c15">unwrap</a> (uint32_t idWrapKey, uint8_t *importedKey, size_t length, <a class="el" href="key_8hpp.html#a4f367c350737c92475175fb229c5570e">key_type_t</a> type, <a class="el" href="key_8hpp.html#a82f88f5cef6b287c45bd2fbb36879c3e">key_use_t</a> use, date_t validity, uint32_t *id)</td></tr>
<tr class="separator:ad232f21ac35cb1d60aaef0b6e7979c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4253afc0859f3af205a305c5d8201ed3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a4253afc0859f3af205a305c5d8201ed3">encrypt</a> (uint32_t idKey, uint8_t *buffer, size_t length)</td></tr>
<tr class="separator:a4253afc0859f3af205a305c5d8201ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac017bb211709f56b2584e1ad6f8c6b12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#ac017bb211709f56b2584e1ad6f8c6b12">decrypt</a> (uint32_t idKey, uint8_t *buffer, size_t length)</td></tr>
<tr class="separator:ac017bb211709f56b2584e1ad6f8c6b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a93a74bcd90868183773495d9b52dab0a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a93a74bcd90868183773495d9b52dab0a">initFile</a> (const char *fileUsers, const char *fileKeys, unsigned instanceId)</td></tr>
<tr class="memdesc:a93a74bcd90868183773495d9b52dab0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init a file corresponding to a void <a class="el" href="classAPI.html" title="API class. ">API</a> object.  <a href="#a93a74bcd90868183773495d9b52dab0a">More...</a><br /></td></tr>
<tr class="separator:a93a74bcd90868183773495d9b52dab0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a33f903bf549583040cbd4ced79821686"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a33f903bf549583040cbd4ced79821686">addKey</a> (<a class="el" href="classKey.html">Key</a> *key)</td></tr>
<tr class="memdesc:a33f903bf549583040cbd4ced79821686"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a key to the memory.  <a href="#a33f903bf549583040cbd4ced79821686">More...</a><br /></td></tr>
<tr class="separator:a33f903bf549583040cbd4ced79821686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeba46623895fc9d5d831fb8f828e6da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#abeba46623895fc9d5d831fb8f828e6da">addUser</a> (<a class="el" href="classUser.html">User</a> *user)</td></tr>
<tr class="memdesc:abeba46623895fc9d5d831fb8f828e6da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a user to the base.  <a href="#abeba46623895fc9d5d831fb8f828e6da">More...</a><br /></td></tr>
<tr class="separator:abeba46623895fc9d5d831fb8f828e6da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9bf448b00701609e20c2167931b8975"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#ae9bf448b00701609e20c2167931b8975">saveAPI</a> ()</td></tr>
<tr class="memdesc:ae9bf448b00701609e20c2167931b8975"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function stores the data into the file API::filename.  <a href="#ae9bf448b00701609e20c2167931b8975">More...</a><br /></td></tr>
<tr class="separator:ae9bf448b00701609e20c2167931b8975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015f9ca96d3f5ab8af44fe2fe8e0215a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a015f9ca96d3f5ab8af44fe2fe8e0215a">loadAPI</a> ()</td></tr>
<tr class="memdesc:a015f9ca96d3f5ab8af44fe2fe8e0215a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function loads the protected data contained in the file API::filename.  <a href="#a015f9ca96d3f5ab8af44fe2fe8e0215a">More...</a><br /></td></tr>
<tr class="separator:a015f9ca96d3f5ab8af44fe2fe8e0215a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af91891e4a2d88f7cab665d9923452963"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#af91891e4a2d88f7cab665d9923452963">findKey</a> (uint32_t id, <a class="el" href="classKey.html">Key</a> **key)</td></tr>
<tr class="memdesc:af91891e4a2d88f7cab665d9923452963"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function finds a key corresponding to a given id.  <a href="#af91891e4a2d88f7cab665d9923452963">More...</a><br /></td></tr>
<tr class="separator:af91891e4a2d88f7cab665d9923452963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01c135c01e7998c4d19f8ca5fa2df9ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a01c135c01e7998c4d19f8ca5fa2df9ca">decryptKey</a> (const <a class="el" href="classKey.html">Key</a> *key, uint8_t *output, size_t *length)</td></tr>
<tr class="memdesc:a01c135c01e7998c4d19f8ca5fa2df9ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function decrypts the key using the local encryption key. IMPORTANT: erase buffer after use !  <a href="#a01c135c01e7998c4d19f8ca5fa2df9ca">More...</a><br /></td></tr>
<tr class="separator:a01c135c01e7998c4d19f8ca5fa2df9ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335b2b56fbf6002bb24cab04b1da9565"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a335b2b56fbf6002bb24cab04b1da9565">protectData</a> (uint8_t *data, size_t length)</td></tr>
<tr class="memdesc:a335b2b56fbf6002bb24cab04b1da9565"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function encrypts the data using the local encryption key.  <a href="#a335b2b56fbf6002bb24cab04b1da9565">More...</a><br /></td></tr>
<tr class="separator:a335b2b56fbf6002bb24cab04b1da9565"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aad1a092d6335ccc65dad4d6c8d6dad64"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad1a092d6335ccc65dad4d6c8d6dad64"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#aad1a092d6335ccc65dad4d6c8d6dad64">_instanceId</a></td></tr>
<tr class="memdesc:aad1a092d6335ccc65dad4d6c8d6dad64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Id of the <a class="el" href="classAPI.html" title="API class. ">API</a> instance (used to identify this instance and to ensure user and key files are corresponding to the same instance. <br /></td></tr>
<tr class="separator:aad1a092d6335ccc65dad4d6c8d6dad64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7720e1ae136e01272d3b291367c6147"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab7720e1ae136e01272d3b291367c6147"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#ab7720e1ae136e01272d3b291367c6147">_isInit</a></td></tr>
<tr class="memdesc:ab7720e1ae136e01272d3b291367c6147"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boolean variable set to true only once memory have been initialised by loading a file. <br /></td></tr>
<tr class="separator:ab7720e1ae136e01272d3b291367c6147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfdce0b863730f9ca75ce44f4de334a7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abfdce0b863730f9ca75ce44f4de334a7"></a>
<a class="el" href="classUser.html">User</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#abfdce0b863730f9ca75ce44f4de334a7">_connectedUser</a></td></tr>
<tr class="memdesc:abfdce0b863730f9ca75ce44f4de334a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identity of the currently connected user (0 if no user connected). <br /></td></tr>
<tr class="separator:abfdce0b863730f9ca75ce44f4de334a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e01e8111ac1590a15b56227e5c5413"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a51e01e8111ac1590a15b56227e5c5413"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a51e01e8111ac1590a15b56227e5c5413">_fileUsers</a></td></tr>
<tr class="memdesc:a51e01e8111ac1590a15b56227e5c5413"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable containing the relative path and filename of the file from which the user memory got initialised and where it should be saved on exit. <br /></td></tr>
<tr class="separator:a51e01e8111ac1590a15b56227e5c5413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7852be9f8494bddc3333f184102f47fb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7852be9f8494bddc3333f184102f47fb"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a7852be9f8494bddc3333f184102f47fb">_fileKeys</a></td></tr>
<tr class="memdesc:a7852be9f8494bddc3333f184102f47fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable containing the relative path and filename of the file from which the key memory got initialised and where it should be saved on exit. <br /></td></tr>
<tr class="separator:a7852be9f8494bddc3333f184102f47fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25dceaad16679832bded6ce63fb1b665"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25dceaad16679832bded6ce63fb1b665"></a>
std::vector&lt; <a class="el" href="classUser.html">User</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a25dceaad16679832bded6ce63fb1b665">_users</a></td></tr>
<tr class="memdesc:a25dceaad16679832bded6ce63fb1b665"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of registered users. <br /></td></tr>
<tr class="separator:a25dceaad16679832bded6ce63fb1b665"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4de53d055dfd4a75c3a9ca25d87fa8ae"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4de53d055dfd4a75c3a9ca25d87fa8ae"></a>
std::vector&lt; <a class="el" href="classKey.html">Key</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAPI.html#a4de53d055dfd4a75c3a9ca25d87fa8ae">_keys</a></td></tr>
<tr class="memdesc:a4de53d055dfd4a75c3a9ca25d87fa8ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory containing all keys that may be manipulated by the <a class="el" href="classAPI.html" title="API class. ">API</a>. <br /></td></tr>
<tr class="separator:a4de53d055dfd4a75c3a9ca25d87fa8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="api_8hpp_source.html#l00017">17</a> of file <a class="el" href="api_8hpp_source.html">api.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab2698dd4fb5e3fefa988f8020937b955"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API::API </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileUsers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileKeys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>string containing the relative path and filename of the file containing the protected memory content to load.</td></tr>
  </table>
  </dd>
</dl>
<hr/>
 <ol>
<li>
<p class="startli">Check that the user file exists</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Check that the key file exists</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">If yes copy filenames to API::fileUsers and API::fileKeys</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Call <a class="el" href="classAPI.html#a015f9ca96d3f5ab8af44fe2fe8e0215a" title="This function loads the protected data contained in the file API::filename. ">API::loadAPI()</a> to load data from the file</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test return code and set API::isInit in case of success</p>
<p class="endli"></p>
</li>
</ol>

<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00009">9</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00208">_fileKeys</a>, <a class="el" href="api_8hpp_source.html#l00205">_fileUsers</a>, <a class="el" href="api_8hpp_source.html#l00199">_isInit</a>, <a class="el" href="api__int_8cpp_source.html#l00129">loadAPI()</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

</div>
</div>
<a class="anchor" id="a583ec65b542b44e4b7013f5fc830fdcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API::~API </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Automatically dump current <a class="el" href="classAPI.html" title="API class. ">API</a> memory to the file used for constructing the object. </p><hr/>
 <ol>
<li>
<p class="startli">Do nothing if <a class="el" href="classAPI.html" title="API class. ">API</a> is not initialized </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Dump <a class="el" href="classAPI.html" title="API class. ">API</a> to the file API::filename </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Free all classes using <a class="el" href="classAPI.html#a1a705f7e87f72e3cd8c078f438fac948" title="Resets the API. ">reset()</a> function. </p>
<p class="endli"></p>
</li>
</ol>

<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00046">46</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00199">_isInit</a>, <a class="el" href="api__ext_8cpp_source.html#l00060">reset()</a>, and <a class="el" href="api__int_8cpp_source.html#l00015">saveAPI()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a33f903bf549583040cbd4ced79821686"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::addKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classKey.html">Key</a> *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>is a pointer to the <a class="el" href="classKey.html" title="Key class. ">Key</a> class that should be added to the memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a></dd></dl>
<hr/>
 
<p>Definition at line <a class="el" href="api__int_8cpp_source.html#l00334">334</a> of file <a class="el" href="api__int_8cpp_source.html">api_int.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00213">_keys</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

<p>Referenced by <a class="el" href="api__int_8cpp_source.html#l00129">loadAPI()</a>, <a class="el" href="api__ext_8cpp_source.html#l00180">newKey()</a>, and <a class="el" href="api__ext_8cpp_source.html#l00359">unwrap()</a>.</p>

</div>
</div>
<a class="anchor" id="abeba46623895fc9d5d831fb8f828e6da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::addUser </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classUser.html">User</a> *&#160;</td>
          <td class="paramname"><em>user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add the user to the list of <a class="el" href="classAPI.html" title="API class. ">API</a> users. </p><hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td>is a pointer to the <a class="el" href="classUser.html" title="User class. ">User</a> class that should be registered. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a05718b630d7176e8e040eca44907b99f" title="provided parameters do not match pre-conditions ">ERROR_PARAM</a> if user is already in the base </li>
</ul>
</dd></dl>
<hr/>
 
<p>Definition at line <a class="el" href="api__int_8cpp_source.html#l00340">340</a> of file <a class="el" href="api__int_8cpp_source.html">api_int.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00211">_users</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="user_8cpp_source.html#l00053">User::hasSameLogin()</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

<p>Referenced by <a class="el" href="api__int_8cpp_source.html#l00129">loadAPI()</a>, <a class="el" href="api__ext_8cpp_source.html#l00082">newUser()</a>, and <a class="el" href="api__ext_8cpp_source.html#l00060">reset()</a>.</p>

</div>
</div>
<a class="anchor" id="ac017bb211709f56b2584e1ad6f8c6b12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::decrypt </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>idKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ol>
<li>
<p class="startli">Get the key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test that the connected user owns the key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test key use and type</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Encrypt </p>
<p class="endli"></p>
</li>
</ol>

<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00492">492</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00202">_connectedUser</a>, <a class="el" href="classAES.html#a8d6f126b784d9ab4808754fb833cdb2a">AES::decrypt()</a>, <a class="el" href="api__int_8cpp_source.html#l00377">decryptKey()</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="error_8hpp_source.html#l00023">ERROR_SEC</a>, <a class="el" href="api__int_8cpp_source.html#l00358">findKey()</a>, <a class="el" href="user_8cpp_source.html#l00020">User::getId()</a>, <a class="el" href="key_8cpp_source.html#l00012">Key::getOwner()</a>, <a class="el" href="key_8cpp_source.html#l00017">Key::getType()</a>, <a class="el" href="key_8cpp_source.html#l00022">Key::getUse()</a>, <a class="el" href="key_8hpp_source.html#l00032">KEY_ENCR</a>, <a class="el" href="key_8hpp_source.html#l00022">KEY_SYM</a>, <a class="el" href="key_8hpp_source.html#l00017">MAX_KEY_LEN</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

</div>
</div>
<a class="anchor" id="a01c135c01e7998c4d19f8ca5fa2df9ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::decryptKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classKey.html">Key</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>is a pointer to the key to decrypt </td></tr>
    <tr><td class="paramname">output</td><td>will contain the key value </td></tr>
    <tr><td class="paramname">length</td><td>is a pointer to the length of the byte array that will be set to the final size of the wrapped key. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a05718b630d7176e8e040eca44907b99f" title="provided parameters do not match pre-conditions ">ERROR_PARAM</a> if ouptut is too small </li>
</ul>
</dd></dl>
<hr/>
 
<p>Definition at line <a class="el" href="api__int_8cpp_source.html#l00377">377</a> of file <a class="el" href="api__int_8cpp_source.html">api_int.cpp</a>.</p>

<p>References <a class="el" href="key_8hpp_source.html#l00120">Key::_length</a>, <a class="el" href="classAES.html#a8d6f126b784d9ab4808754fb833cdb2a">AES::decrypt()</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="error_8hpp_source.html#l00029">ERROR_UNEXPECTED</a>, <a class="el" href="key_8cpp_source.html#l00032">Key::getValue()</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

<p>Referenced by <a class="el" href="api__ext_8cpp_source.html#l00492">decrypt()</a>, <a class="el" href="api__ext_8cpp_source.html#l00437">encrypt()</a>, <a class="el" href="api__ext_8cpp_source.html#l00359">unwrap()</a>, and <a class="el" href="api__ext_8cpp_source.html#l00297">wrap()</a>.</p>

</div>
</div>
<a class="anchor" id="ad94326209dc6c62d65cde5a37e3c0078"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::deleteUser </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deleting a user from the user list (admin rights required). </p><hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is the id of the user to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured  </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a04643a170c5fbdb451f819ac59992cd8" title="a security error occured ">ERROR_SEC</a> if connected user is not admin or if he tries to delete himself  </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a05718b630d7176e8e040eca44907b99f" title="provided parameters do not match pre-conditions ">ERROR_PARAM</a> if user is not in the base  </li>
</ul>
</dd></dl>
<hr/>
 
<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00126">126</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00202">_connectedUser</a>, <a class="el" href="api_8hpp_source.html#l00213">_keys</a>, <a class="el" href="api_8hpp_source.html#l00211">_users</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="error_8hpp_source.html#l00023">ERROR_SEC</a>, <a class="el" href="error_8hpp_source.html#l00025">ERROR_SEQ</a>, <a class="el" href="user_8cpp_source.html#l00030">User::getRole()</a>, <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>, and <a class="el" href="user_8hpp_source.html#l00030">USER_ADMIN</a>.</p>

</div>
</div>
<a class="anchor" id="a4253afc0859f3af205a305c5d8201ed3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::encrypt </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>idKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ol>
<li>
<p class="startli">Get the key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test that the connected user owns the key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test key use and type</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Encrypt </p>
<p class="endli"></p>
</li>
</ol>

<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00437">437</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00202">_connectedUser</a>, <a class="el" href="api__int_8cpp_source.html#l00377">decryptKey()</a>, <a class="el" href="classAES.html#a0e94d92922ffbae3b50378c14bdf80c3">AES::encrypt()</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="error_8hpp_source.html#l00023">ERROR_SEC</a>, <a class="el" href="api__int_8cpp_source.html#l00358">findKey()</a>, <a class="el" href="user_8cpp_source.html#l00020">User::getId()</a>, <a class="el" href="key_8cpp_source.html#l00012">Key::getOwner()</a>, <a class="el" href="key_8cpp_source.html#l00017">Key::getType()</a>, <a class="el" href="key_8cpp_source.html#l00022">Key::getUse()</a>, <a class="el" href="key_8hpp_source.html#l00032">KEY_ENCR</a>, <a class="el" href="key_8hpp_source.html#l00022">KEY_SYM</a>, <a class="el" href="key_8hpp_source.html#l00017">MAX_KEY_LEN</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

</div>
</div>
<a class="anchor" id="af91891e4a2d88f7cab665d9923452963"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::findKey </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classKey.html">Key</a> **&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>is the id of the searched key </td></tr>
    <tr><td class="paramname">key</td><td>is a pointer to a key* object that will be set to point to the found key </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a05718b630d7176e8e040eca44907b99f" title="provided parameters do not match pre-conditions ">ERROR_PARAM</a> if no key is found </li>
</ul>
</dd></dl>
<hr/>
 <ol>
<li>
</li>
</ol>

<p>Definition at line <a class="el" href="api__int_8cpp_source.html#l00358">358</a> of file <a class="el" href="api__int_8cpp_source.html">api_int.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00213">_keys</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

<p>Referenced by <a class="el" href="api__ext_8cpp_source.html#l00492">decrypt()</a>, <a class="el" href="api__ext_8cpp_source.html#l00437">encrypt()</a>, <a class="el" href="api__ext_8cpp_source.html#l00359">unwrap()</a>, and <a class="el" href="api__ext_8cpp_source.html#l00297">wrap()</a>.</p>

</div>
</div>
<a class="anchor" id="a93a74bcd90868183773495d9b52dab0a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void API::initFile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileUsers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileKeys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>instanceId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Format a file to be a void <a class="el" href="classAPI.html" title="API class. ">API</a> object. </p><hr/>
 
<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00547">547</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a015f9ca96d3f5ab8af44fe2fe8e0215a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::loadAPI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
 <dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a35d177e90088f78bdd0eede2ed9f2f6c" title="an I/O error occured ">ERROR_IO</a> if an error occured when reading the file </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0afa6ab537b9cb919464f60f53ade3f01d" title="the data provided did not match the expected format ">ERROR_FORMAT</a> if an error occured when parsing the data </li>
</ul>
</dd></dl>
<hr/>
 <ol>
<li>
<p class="startli">Opening the user file</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Reading header</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Init tag computation </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Reading users</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Adding to tag computation </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Compute the tag corresponding to the file </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Opening the key file</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Reading header</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Init tag computation </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Reading keys</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Adding to tag computation </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Compute the tag corresponding to the file </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Closing the file</p>
<p class="endli"></p>
</li>
</ol>

<p>Definition at line <a class="el" href="api__int_8cpp_source.html#l00129">129</a> of file <a class="el" href="api__int_8cpp_source.html">api_int.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00208">_fileKeys</a>, <a class="el" href="api_8hpp_source.html#l00205">_fileUsers</a>, <a class="el" href="api_8hpp_source.html#l00196">_instanceId</a>, <a class="el" href="api_8hpp_source.html#l00199">_isInit</a>, <a class="el" href="user_8hpp_source.html#l00103">User::_serializedSize</a>, <a class="el" href="key_8hpp_source.html#l00115">Key::_serializedSize</a>, <a class="el" href="api__int_8cpp_source.html#l00334">addKey()</a>, <a class="el" href="api__int_8cpp_source.html#l00340">addUser()</a>, <a class="el" href="base64_8cpp_source.html#l00127">BASE64::decode()</a>, <a class="el" href="error_8hpp_source.html#l00021">ERROR_FORMAT</a>, <a class="el" href="error_8hpp_source.html#l00017">ERROR_IO</a>, <a class="el" href="error_8hpp_source.html#l00023">ERROR_SEC</a>, <a class="el" href="classHMAC.html#a354fa05b4188049bdee0d70ddda0558c">HMAC::final()</a>, <a class="el" href="classHMAC.html#af1a48c84179f5fa75db1a226dd9f4784">HMAC::init()</a>, <a class="el" href="key_8hpp_source.html#l00017">MAX_KEY_LEN</a>, <a class="el" href="api__ext_8cpp_source.html#l00180">newKey()</a>, <a class="el" href="api__ext_8cpp_source.html#l00082">newUser()</a>, <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>, <a class="el" href="api__ext_8cpp_source.html#l00060">reset()</a>, and <a class="el" href="classHMAC.html#a5b9524a8e0940a487790465f5d0b60dc">HMAC::update()</a>.</p>

<p>Referenced by <a class="el" href="api__ext_8cpp_source.html#l00009">API()</a>.</p>

</div>
</div>
<a class="anchor" id="a94ef4273680b86b5340442d965b48fab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::newKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="key_8hpp.html#a4f367c350737c92475175fb229c5570e">key_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="key_8hpp.html#a82f88f5cef6b287c45bd2fbb36879c3e">key_use_t</a>&#160;</td>
          <td class="paramname"><em>use</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date_t&#160;</td>
          <td class="paramname"><em>validity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>should be one of the key_type_t values </td></tr>
    <tr><td class="paramname">use</td><td>should be one of the key_use_t values </td></tr>
    <tr><td class="paramname">validity</td><td>could be anything </td></tr>
    <tr><td class="paramname">length</td><td>should not be 0 and should not exceed the maximal size of a key <a class="el" href="key_8hpp.html#ac370bb59baac7684d0c8762b93a29b12" title="Maximum length of a key. ">MAX_KEY_LEN</a> </td></tr>
    <tr><td class="paramname">id</td><td>will be set to 0 in case of error or will contain the newly created key id (could be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured  </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a05718b630d7176e8e040eca44907b99f" title="provided parameters do not match pre-conditions ">ERROR_PARAM</a> if invalid attributes are given  </li>
</ul>
</dd></dl>
<hr/>
 <p>Only symmetric keys are implemented at the moment </p>
<p>Check key size </p>
<p>Check use </p>
<p>Setting attributes </p>
<p>Generating the value  </p>

<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00180">180</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="key_8hpp_source.html#l00118">Key::_associated</a>, <a class="el" href="api_8hpp_source.html#l00202">_connectedUser</a>, <a class="el" href="key_8hpp_source.html#l00123">Key::_id</a>, <a class="el" href="api_8hpp_source.html#l00213">_keys</a>, <a class="el" href="key_8hpp_source.html#l00120">Key::_length</a>, <a class="el" href="key_8hpp_source.html#l00125">Key::_owner</a>, <a class="el" href="key_8hpp_source.html#l00127">Key::_type</a>, <a class="el" href="key_8hpp_source.html#l00129">Key::_use</a>, <a class="el" href="key_8hpp_source.html#l00131">Key::_validity</a>, <a class="el" href="key_8hpp_source.html#l00133">Key::_value</a>, <a class="el" href="api__int_8cpp_source.html#l00334">addKey()</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="user_8cpp_source.html#l00020">User::getId()</a>, <a class="el" href="key_8hpp_source.html#l00032">KEY_ENCR</a>, <a class="el" href="key_8hpp_source.html#l00036">KEY_INTE</a>, <a class="el" href="key_8hpp_source.html#l00034">KEY_SIGN</a>, <a class="el" href="key_8hpp_source.html#l00022">KEY_SYM</a>, <a class="el" href="key_8hpp_source.html#l00038">KEY_WRAP</a>, <a class="el" href="key_8hpp_source.html#l00017">MAX_KEY_LEN</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

<p>Referenced by <a class="el" href="api__int_8cpp_source.html#l00129">loadAPI()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b02f83fb6209418f8b310845082ca80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::newUser </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>login</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add the user to the list of <a class="el" href="classAPI.html" title="API class. ">API</a> users. </p><hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">login</td><td>is a string containing the login of the user to create </td></tr>
    <tr><td class="paramname">password</td><td>contains the corresponding password </td></tr>
    <tr><td class="paramname">id</td><td>is a pointer to a variable that will get the id of the created user or be set to 0 in case of error (id could be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured  </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a04643a170c5fbdb451f819ac59992cd8" title="a security error occured ">ERROR_SEC</a> if current user has not admin rights  </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a73e27092d03a75cb850f9a5db39067d7" title="a sequencing error occured ">ERROR_SEQ</a> if nobody is connected  </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a05718b630d7176e8e040eca44907b99f" title="provided parameters do not match pre-conditions ">ERROR_PARAM</a> if user is already in the base  </li>
</ul>
</dd></dl>
<hr/>
 
<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00082">82</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00202">_connectedUser</a>, <a class="el" href="api_8hpp_source.html#l00211">_users</a>, <a class="el" href="api__int_8cpp_source.html#l00340">addUser()</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="error_8hpp_source.html#l00023">ERROR_SEC</a>, <a class="el" href="error_8hpp_source.html#l00025">ERROR_SEQ</a>, <a class="el" href="user_8cpp_source.html#l00020">User::getId()</a>, <a class="el" href="user_8cpp_source.html#l00030">User::getRole()</a>, <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>, <a class="el" href="user_8hpp_source.html#l00030">USER_ADMIN</a>, and <a class="el" href="user_8hpp_source.html#l00028">USER_BASIC</a>.</p>

<p>Referenced by <a class="el" href="api__int_8cpp_source.html#l00129">loadAPI()</a>.</p>

</div>
</div>
<a class="anchor" id="a335b2b56fbf6002bb24cab04b1da9565"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::protectData </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>is a pointer to the data to protect </td></tr>
    <tr><td class="paramname">length</td><td>is the length of the data (in bytes). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured </li>
</ul>
</dd></dl>
<hr/>
 
<p>Definition at line <a class="el" href="api__int_8cpp_source.html#l00414">414</a> of file <a class="el" href="api__int_8cpp_source.html">api_int.cpp</a>.</p>

<p>References <a class="el" href="classAES.html#a0e94d92922ffbae3b50378c14bdf80c3">AES::encrypt()</a>, <a class="el" href="error_8hpp_source.html#l00029">ERROR_UNEXPECTED</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

<p>Referenced by <a class="el" href="api__ext_8cpp_source.html#l00359">unwrap()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a705f7e87f72e3cd8c078f438fac948"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void API::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resets the <a class="el" href="classAPI.html" title="API class. ">API</a> by deleting users and memory. An admin account is created with default password s3cr3t_p </p><hr/>
 
<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00060">60</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00202">_connectedUser</a>, <a class="el" href="api_8hpp_source.html#l00213">_keys</a>, <a class="el" href="api_8hpp_source.html#l00211">_users</a>, <a class="el" href="api__int_8cpp_source.html#l00340">addUser()</a>, <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>, and <a class="el" href="user_8hpp_source.html#l00030">USER_ADMIN</a>.</p>

<p>Referenced by <a class="el" href="api__int_8cpp_source.html#l00129">loadAPI()</a>, and <a class="el" href="api__ext_8cpp_source.html#l00046">~API()</a>.</p>

</div>
</div>
<a class="anchor" id="ae9bf448b00701609e20c2167931b8975"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::saveAPI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<hr/>
 <dl class="section return"><dt>Returns</dt><dd><ul>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0abf350750d0d4fabd8954c0f1e9bbae94" title="evertything is ok ">NO_ERROR</a> if no error occured </li>
<li>
<a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0a35d177e90088f78bdd0eede2ed9f2f6c" title="an I/O error occured ">ERROR_IO</a> if an error occured when writing in the file </li>
</ul>
</dd></dl>
<hr/>
 <ol>
<li>
<p class="startli">Opening the user file</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Init tag computation </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Processing the header  </p><ul>
<li>
<p class="startli">Printing </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Adding to tag computation </p>
<p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
<li>
Processing the users  <ul>
<li>
<p class="startli">Printing </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Adding to tag computation </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Next key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Dumping the footer</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Close the file</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Opening the key file</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Init tag computation </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Processing the header  </p><ul>
<li>
<p class="startli">Printing </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Adding to tag computation </p>
<p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli">Dumping keys</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Adding to tag computation </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Next key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Dumping the footer</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Close the file</p>
<p class="endli"></p>
</li>
</ul>
</li>
</ol>

<p>Definition at line <a class="el" href="api__int_8cpp_source.html#l00015">15</a> of file <a class="el" href="api__int_8cpp_source.html">api_int.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00208">_fileKeys</a>, <a class="el" href="api_8hpp_source.html#l00205">_fileUsers</a>, <a class="el" href="api_8hpp_source.html#l00196">_instanceId</a>, <a class="el" href="api_8hpp_source.html#l00213">_keys</a>, <a class="el" href="user_8hpp_source.html#l00103">User::_serializedSize</a>, <a class="el" href="key_8hpp_source.html#l00115">Key::_serializedSize</a>, <a class="el" href="api_8hpp_source.html#l00211">_users</a>, <a class="el" href="base64_8cpp_source.html#l00053">BASE64::encode()</a>, <a class="el" href="error_8hpp_source.html#l00017">ERROR_IO</a>, <a class="el" href="classHMAC.html#a354fa05b4188049bdee0d70ddda0558c">HMAC::final()</a>, <a class="el" href="classHMAC.html#af1a48c84179f5fa75db1a226dd9f4784">HMAC::init()</a>, <a class="el" href="key_8hpp_source.html#l00017">MAX_KEY_LEN</a>, <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>, and <a class="el" href="classHMAC.html#a5b9524a8e0940a487790465f5d0b60dc">HMAC::update()</a>.</p>

<p>Referenced by <a class="el" href="api__ext_8cpp_source.html#l00046">~API()</a>.</p>

</div>
</div>
<a class="anchor" id="ad232f21ac35cb1d60aaef0b6e7979c15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::unwrap </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>idWrapKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>importedKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="key_8hpp.html#a4f367c350737c92475175fb229c5570e">key_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="key_8hpp.html#a82f88f5cef6b287c45bd2fbb36879c3e">key_use_t</a>&#160;</td>
          <td class="paramname"><em>use</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">date_t&#160;</td>
          <td class="paramname"><em>validity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ol>
<li>
<p class="startli">Get the key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test that the connected user owns the key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test wrap key use and import size </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Unwrap key and protect it with local key </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Add key to <a class="el" href="classAPI.html" title="API class. ">API</a> </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Setting attributes </p>
<p class="endli"></p>
</li>
</ol>

<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00359">359</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="key_8hpp_source.html#l00118">Key::_associated</a>, <a class="el" href="api_8hpp_source.html#l00202">_connectedUser</a>, <a class="el" href="key_8hpp_source.html#l00123">Key::_id</a>, <a class="el" href="api_8hpp_source.html#l00213">_keys</a>, <a class="el" href="key_8hpp_source.html#l00120">Key::_length</a>, <a class="el" href="key_8hpp_source.html#l00125">Key::_owner</a>, <a class="el" href="key_8hpp_source.html#l00127">Key::_type</a>, <a class="el" href="key_8hpp_source.html#l00129">Key::_use</a>, <a class="el" href="key_8hpp_source.html#l00131">Key::_validity</a>, <a class="el" href="key_8hpp_source.html#l00133">Key::_value</a>, <a class="el" href="api__int_8cpp_source.html#l00334">addKey()</a>, <a class="el" href="classAES.html#a8d6f126b784d9ab4808754fb833cdb2a">AES::decrypt()</a>, <a class="el" href="api__int_8cpp_source.html#l00377">decryptKey()</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="error_8hpp_source.html#l00023">ERROR_SEC</a>, <a class="el" href="api__int_8cpp_source.html#l00358">findKey()</a>, <a class="el" href="user_8cpp_source.html#l00020">User::getId()</a>, <a class="el" href="key_8cpp_source.html#l00012">Key::getOwner()</a>, <a class="el" href="key_8cpp_source.html#l00022">Key::getUse()</a>, <a class="el" href="key_8hpp_source.html#l00038">KEY_WRAP</a>, <a class="el" href="key_8hpp_source.html#l00017">MAX_KEY_LEN</a>, <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>, <a class="el" href="api__int_8cpp_source.html#l00414">protectData()</a>, and <a class="el" href="api__ext_8cpp_source.html#l00297">wrap()</a>.</p>

</div>
</div>
<a class="anchor" id="ac115603da5cc49b407f6b3710e01a985"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8hpp.html#acabd2917084445509becf54ab64a4bd0">myerror_t</a> API::wrap </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>idWrapKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>idExportedKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ol>
<li>
<p class="startli">Get the keys </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test that the connected user owns the keys </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Test wrap key use and output size </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Wrap key </p>
<p class="endli"></p>
</li>
</ol>

<p>Definition at line <a class="el" href="api__ext_8cpp_source.html#l00297">297</a> of file <a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a>.</p>

<p>References <a class="el" href="api_8hpp_source.html#l00202">_connectedUser</a>, <a class="el" href="api__int_8cpp_source.html#l00377">decryptKey()</a>, <a class="el" href="classAES.html#a0e94d92922ffbae3b50378c14bdf80c3">AES::encrypt()</a>, <a class="el" href="error_8hpp_source.html#l00019">ERROR_PARAM</a>, <a class="el" href="error_8hpp_source.html#l00023">ERROR_SEC</a>, <a class="el" href="api__int_8cpp_source.html#l00358">findKey()</a>, <a class="el" href="user_8cpp_source.html#l00020">User::getId()</a>, <a class="el" href="key_8cpp_source.html#l00012">Key::getOwner()</a>, <a class="el" href="key_8cpp_source.html#l00022">Key::getUse()</a>, <a class="el" href="key_8hpp_source.html#l00038">KEY_WRAP</a>, <a class="el" href="key_8hpp_source.html#l00017">MAX_KEY_LEN</a>, and <a class="el" href="error_8hpp_source.html#l00015">NO_ERROR</a>.</p>

<p>Referenced by <a class="el" href="api__ext_8cpp_source.html#l00359">unwrap()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>includes/<a class="el" href="api_8hpp_source.html">api.hpp</a></li>
<li>src/<a class="el" href="api__ext_8cpp_source.html">api_ext.cpp</a></li>
<li>src/<a class="el" href="api__int_8cpp_source.html">api_int.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
